{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Trang Tran\\\\Desktop\\\\Project\\\\frontend\\\\src\\\\features\\\\container\\\\detailtour\\\\tour\\\\Tour.js\",\n    _s = $RefreshSig$();\n\nimport { Carousel, message, Popover, Radio, Rate, Spin } from 'antd';\nimport React, { useEffect, useState } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport './tour.css';\nimport { Link, useHistory, useParams } from 'react-router-dom';\nimport Detail from '../detail/Detail';\nimport Footer from '../../trangchu/footer/Footer';\nimport { ngaydiData } from '../../admin/Ngaydi/ngaydiSlice'; // import { addthanhtoan } from './thanhtoanSlice';\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Tour(props) {\n  _s();\n\n  const {\n    id\n  } = useParams();\n  const [state, setState] = useState({\n    listdate: '',\n    visible: false,\n    visible2: false,\n    visible3: false,\n    name: \"\",\n    email: \"\",\n    sdt: \"\",\n    diachi: \"\",\n    nguoilon: 1,\n    treem: 0,\n    embe: 0,\n    valueDate: \"\",\n    date: \"\",\n    loadlaihoadon: 1\n  });\n  const dispatch = useDispatch();\n\n  const actionngaydi = async () => {\n    await dispatch(ngaydiData());\n  };\n\n  const tours = useSelector(state => state.tours.tour.data);\n  const ngaydis = useSelector(state => state.ngaydis.ngaydi.data);\n  const tour = [];\n\n  if (tours) {\n    for (let i = 0; i < tours.length; i++) {\n      if (tours[i].id === +id) {\n        tour.push(tours[i].Ngaydis);\n      }\n    }\n  }\n\n  const formatdate = e => {\n    if (e) {\n      var ngay = e.substr(0, 2);\n      var thang = e.substr(3, 2);\n      var nam = e.substr(6, 4);\n      return nam + '-' + thang + '-' + ngay;\n    }\n  };\n\n  const checkngaydi = () => {\n    if (tour.length !== 0) {\n      // console.log(tour);\n      var ngaydi = tour[0];\n      var ngaymin = formatdate(ngaydi[0].ngay);\n      var date = new Date(); // var dateToday = date.getFullYear() + \"-\" + ((date.getMonth() + 1) > 1 ? date.getMonth() + 1 : (\"0\" + (date.getMonth() + 1))) + \"-\" + (date.getDate() > 1 ? date.getDate() : (\"0\" + date.getDate()));\n\n      var listDate = [];\n\n      for (let i = 0; i < ngaydi.length; i++) {\n        if (new Date(ngaymin) < new Date(formatdate(ngaydi[i].ngay)) && date <= new Date(formatdate(ngaydi[i].ngay))) {\n          listDate.push(formatdate(ngaydi[i].ngay));\n        }\n      } // console.log(listDate.sort((a, b) => { return new Date(b) - new Date(a) }));\n\n\n      listDate.sort(function (a, b) {\n        return new Date(a) - new Date(b);\n      });\n      return listDate[0];\n    }\n  };\n\n  const fillDate = () => {\n    if (tour.length !== 0) {\n      var ngaydi = tour[0];\n      var date = new Date();\n      var dates = [];\n      var dateToday = date.getFullYear() + \"-\" + (date.getMonth() + 1 > 1 ? date.getMonth() + 1 : \"0\" + (date.getMonth() + 1)) + \"-\" + (date.getDate() > 1 ? date.getDate() : \"0\" + date.getDate());\n\n      for (let i = 0; i < ngaydi.length; i++) {\n        console.log(dateToday <= formatdate(ngaydi[i].ngay));\n\n        if (date <= new Date(formatdate(ngaydi[i].ngay))) {\n          dates.push({\n            id: i + 1,\n            ngay: ngaydi[i].ngay\n          });\n        }\n      }\n\n      return dates;\n    }\n  };\n\n  const formatlaidate = e => {\n    if (e) {\n      var ngay = e.substr(8, 2);\n      var thang = e.substr(5, 2);\n      var nam = e.substr(0, 4);\n      return ngay + \"/\" + thang + \"/\" + nam;\n    }\n  };\n\n  var tour_ngay = [];\n\n  if (ngaydis && formatlaidate(checkngaydi())) {\n    tour_ngay.push(ngaydis.find(x => x.ngay === formatlaidate(checkngaydi())).Tours.find(x => x.id === +id));\n  }\n\n  console.log(tour_ngay);\n\n  const hide = () => {\n    setState({ ...state,\n      visible3: false\n    });\n  };\n\n  const {\n    name,\n    sdt,\n    diachi,\n    email,\n    nguoilon,\n    treem,\n    embe\n  } = state;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    id: \"detail-tour\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"breadcrumb\",\n      children: /*#__PURE__*/_jsxDEV(\"nav\", {\n        \"aria-label\": \"breadcrumb\",\n        children: /*#__PURE__*/_jsxDEV(\"ol\", {\n          className: \"breadcrumb\",\n          children: [/*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"breadcrumb-item\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/\",\n              children: [/*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"fas fa-home mr-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 123,\n                columnNumber: 58\n              }, this), \"Trang ch\\u1EE7\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 123,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 123,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"breadcrumb-item\",\n            children: /*#__PURE__*/_jsxDEV(Link, {\n              to: \"/list-tour\",\n              children: \"Tour du l\\u1ECBch\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 124,\n              columnNumber: 45\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 124,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"li\", {\n            className: \"breadcrumb-item active\",\n            \"aria-current\": \"page\",\n            children: tour_ngay.length > 0 ? tour_ngay[0].name : \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 125,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 122,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this), tour_ngay.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"spin\",\n      children: [/*#__PURE__*/_jsxDEV(Spin, {\n        className: \"mt-1\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 31\n      }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"Test tour detail\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 130,\n        columnNumber: 56\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 130,\n      columnNumber: 9\n    }, this) : tour_ngay.map(ok => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"box-tour\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"row justify-content-center\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"col-lg-8\",\n            children: /*#__PURE__*/_jsxDEV(Carousel, {\n              autoplay: true,\n              children: tours.find(x => x.id === +id).Anhs.map(oki => /*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: oki.link,\n                  width: \"760px\",\n                  height: \"430px\",\n                  alt: \"\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 140,\n                  columnNumber: 25\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 139,\n                columnNumber: 23\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 137,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 136,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 135,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(Detail, {\n          id: id\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 146,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 134,\n        columnNumber: 13\n      }, this)\n    }, ok.id, false, {\n      fileName: _jsxFileName,\n      lineNumber: 133,\n      columnNumber: 11\n    }, this)), /*#__PURE__*/_jsxDEV(Footer, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 119,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Tour, \"gFSgxPuBUCRu6YeX48BfAsgN81M=\", false, function () {\n  return [useParams, useDispatch, useSelector, useSelector];\n});\n\n_c = Tour;\nexport default Tour;\n\nvar _c;\n\n$RefreshReg$(_c, \"Tour\");","map":{"version":3,"sources":["C:/Users/Trang Tran/Desktop/Project/frontend/src/features/container/detailtour/tour/Tour.js"],"names":["Carousel","message","Popover","Radio","Rate","Spin","React","useEffect","useState","useDispatch","useSelector","Link","useHistory","useParams","Detail","Footer","ngaydiData","Tour","props","id","state","setState","listdate","visible","visible2","visible3","name","email","sdt","diachi","nguoilon","treem","embe","valueDate","date","loadlaihoadon","dispatch","actionngaydi","tours","tour","data","ngaydis","ngaydi","i","length","push","Ngaydis","formatdate","e","ngay","substr","thang","nam","checkngaydi","ngaymin","Date","listDate","sort","a","b","fillDate","dates","dateToday","getFullYear","getMonth","getDate","console","log","formatlaidate","tour_ngay","find","x","Tours","hide","map","ok","Anhs","oki","link"],"mappings":"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","sourcesContent":["import { Carousel, message, Popover, Radio, Rate, Spin } from 'antd'\r\nimport React, { useEffect, useState } from 'react'\r\nimport { useDispatch, useSelector } from 'react-redux'\r\nimport './tour.css'\r\nimport { Link, useHistory, useParams } from 'react-router-dom';\r\nimport Detail from '../detail/Detail';\r\nimport Footer from '../../trangchu/footer/Footer'\r\nimport { ngaydiData } from '../../admin/Ngaydi/ngaydiSlice';\r\n// import { addthanhtoan } from './thanhtoanSlice';\r\nfunction Tour(props) {\r\n  const { id } = useParams()\r\n  const [state, setState] = useState({\r\n    listdate: '',\r\n    visible: false,\r\n    visible2: false,\r\n    visible3: false,\r\n    name: \"\",\r\n    email: \"\",\r\n    sdt: \"\",\r\n    diachi: \"\",\r\n    nguoilon: 1,\r\n    treem: 0,\r\n    embe: 0,\r\n    valueDate: \"\",\r\n    date: \"\",\r\n    loadlaihoadon: 1,\r\n  })\r\n \r\n\r\n\r\n  const dispatch = useDispatch();\r\n  const actionngaydi = async () => { await dispatch(ngaydiData()) }\r\n\r\n  const tours = useSelector(state => state.tours.tour.data);\r\n  const ngaydis = useSelector(state => state.ngaydis.ngaydi.data);\r\n\r\n  const tour = [];\r\n  if (tours) {\r\n    for (let i = 0; i < tours.length; i++) {\r\n      if (tours[i].id === +id) {\r\n        tour.push(tours[i].Ngaydis)\r\n      }\r\n    }\r\n  }\r\n\r\n  const formatdate = e => {\r\n    if (e) {\r\n      var ngay = e.substr(0, 2)\r\n      var thang = e.substr(3, 2)\r\n      var nam = e.substr(6, 4)\r\n      return nam + '-' + thang + '-' + ngay;\r\n    }\r\n  }\r\n  const checkngaydi = () => {\r\n    if (tour.length !== 0) {\r\n      // console.log(tour);\r\n      var ngaydi = tour[0];\r\n      var ngaymin = formatdate(ngaydi[0].ngay);\r\n      var date = new Date();\r\n      // var dateToday = date.getFullYear() + \"-\" + ((date.getMonth() + 1) > 1 ? date.getMonth() + 1 : (\"0\" + (date.getMonth() + 1))) + \"-\" + (date.getDate() > 1 ? date.getDate() : (\"0\" + date.getDate()));\r\n      var listDate = [];\r\n      for (let i = 0; i < ngaydi.length; i++) {\r\n        if (new Date(ngaymin) < new Date(formatdate(ngaydi[i].ngay)) && date <= new Date(formatdate(ngaydi[i].ngay))) {\r\n          listDate.push(formatdate(ngaydi[i].ngay))\r\n        }\r\n      }\r\n      // console.log(listDate.sort((a, b) => { return new Date(b) - new Date(a) }));\r\n      listDate.sort(function (a, b) {\r\n        return new Date(a) - new Date(b);\r\n      });\r\n      return listDate[0];\r\n\r\n    }\r\n  }\r\n  const fillDate = () => {\r\n    if (tour.length !== 0) {\r\n      var ngaydi = tour[0];\r\n      var date = new Date();\r\n      var dates = []\r\n      var dateToday = date.getFullYear() + \"-\" + ((date.getMonth() + 1) > 1 ? date.getMonth() + 1 : (\"0\" + (date.getMonth() + 1))) + \"-\" + (date.getDate() > 1 ? date.getDate() : (\"0\" + date.getDate()));\r\n      for (let i = 0; i < ngaydi.length; i++) {\r\n        console.log(dateToday <= formatdate(ngaydi[i].ngay));\r\n        if (date <= new Date(formatdate(ngaydi[i].ngay))) {\r\n          dates.push({ id: i + 1, ngay: ngaydi[i].ngay })\r\n        }\r\n      }\r\n\r\n      return dates\r\n    }\r\n  }\r\n\r\n  const formatlaidate = (e) => {\r\n    if (e) {\r\n      var ngay = e.substr(8, 2)\r\n      var thang = e.substr(5, 2)\r\n      var nam = e.substr(0, 4)\r\n      return ngay + \"/\" + thang + \"/\" + nam\r\n    }\r\n  }\r\n  var tour_ngay = [];\r\n  if (ngaydis && formatlaidate(checkngaydi())) {\r\n    tour_ngay.push(ngaydis.find(x => x.ngay === formatlaidate(checkngaydi())).Tours.find(x => x.id === +id))\r\n  }\r\n  console.log(tour_ngay);\r\n  const hide = () => {\r\n    setState({\r\n      ...state,\r\n      visible3: false,\r\n    });\r\n  };\r\n \r\n\r\n\r\n  const { name, sdt, diachi, email, nguoilon, treem, embe } = state\r\n \r\n\r\n  \r\n  return (\r\n    <div id=\"detail-tour\">\r\n      <div className=\"breadcrumb\">\r\n        <nav aria-label=\"breadcrumb\">\r\n          <ol className=\"breadcrumb\">\r\n            <li className=\"breadcrumb-item\"><Link to=\"/\"><i className=\"fas fa-home mr-2\"></i>Trang chủ</Link></li>\r\n            <li className=\"breadcrumb-item\"><Link to=\"/list-tour\">Tour du lịch</Link></li>\r\n            <li className=\"breadcrumb-item active\" aria-current=\"page\">{tour_ngay.length > 0 ? tour_ngay[0].name : \"\"}</li>\r\n          </ol>\r\n        </nav>\r\n      </div>\r\n      { tour_ngay.length === 0 ?\r\n        <div className=\"spin\"><Spin className=\"mt-1\" /><h1>Test tour detail</h1></div>\r\n        :\r\n        tour_ngay.map(ok => (\r\n          <div className=\"box-tour\" key={ok.id}>\r\n            <div className=\"container bg-white\">\r\n              <div className=\"row justify-content-center\" >\r\n                <div className=\"col-lg-8\">\r\n                  <Carousel autoplay>\r\n                    {tours.find(x => x.id === +id).Anhs.map(oki => (\r\n                      <div>\r\n                        <img src={oki.link} width=\"760px\" height=\"430px\" alt=\"\" />\r\n                      </div>\r\n                    ))}\r\n                  </Carousel>\r\n                </div>\r\n              </div>\r\n              <Detail id={id} />\r\n            </div>\r\n          </div>\r\n        ))}\r\n      <Footer />\r\n    </div>\r\n\r\n  )\r\n}\r\n\r\nexport default Tour"]},"metadata":{},"sourceType":"module"}