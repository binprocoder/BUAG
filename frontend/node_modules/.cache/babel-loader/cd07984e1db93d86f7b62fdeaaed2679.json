{"ast":null,"code":"\"use strict\";\n/**\r\n * Copyright 2017 Google Inc.\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *   http://www.apache.org/licenses/LICENSE-2.0\r\n *\r\n * Unless required by applicable law or agreed to in writing, software\r\n * distributed under the License is distributed on an \"AS IS\" BASIS,\r\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\r\n * See the License for the specific language governing permissions and\r\n * limitations under the License.\r\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar StatsCollection_1 = require(\"./StatsCollection\");\n\nvar StatsManager =\n/** @class */\nfunction () {\n  function StatsManager() {}\n\n  StatsManager.getCollection = function (repoInfo) {\n    var hashString = repoInfo.toString();\n\n    if (!this.collections_[hashString]) {\n      this.collections_[hashString] = new StatsCollection_1.StatsCollection();\n    }\n\n    return this.collections_[hashString];\n  };\n\n  StatsManager.getOrCreateReporter = function (repoInfo, creatorFunction) {\n    var hashString = repoInfo.toString();\n\n    if (!this.reporters_[hashString]) {\n      this.reporters_[hashString] = creatorFunction();\n    }\n\n    return this.reporters_[hashString];\n  };\n\n  StatsManager.collections_ = {};\n  StatsManager.reporters_ = {};\n  return StatsManager;\n}();\n\nexports.StatsManager = StatsManager;","map":{"version":3,"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;AAgBA;;AAGA;AAAA;AAAA;AAAA,2BA0BC;;AAtBQA,+BAAP,UAAqBC,QAArB,EAAuC;AACrC,QAAMC,UAAU,GAAGD,QAAQ,CAACE,QAAT,EAAnB;;AAEA,QAAI,CAAC,KAAKC,YAAL,CAAkBF,UAAlB,CAAL,EAAoC;AAClC,WAAKE,YAAL,CAAkBF,UAAlB,IAAgC,IAAIG,iCAAJ,EAAhC;AACD;;AAED,WAAO,KAAKD,YAAL,CAAkBF,UAAlB,CAAP;AACD,GARM;;AAUAF,qCAAP,UACEC,QADF,EAEEK,eAFF,EAE0B;AAExB,QAAMJ,UAAU,GAAGD,QAAQ,CAACE,QAAT,EAAnB;;AAEA,QAAI,CAAC,KAAKI,UAAL,CAAgBL,UAAhB,CAAL,EAAkC;AAChC,WAAKK,UAAL,CAAgBL,UAAhB,IAA8BI,eAAe,EAA7C;AACD;;AAED,WAAO,KAAKC,UAAL,CAAgBL,UAAhB,CAAP;AACD,GAXM;;AAbQF,8BAAiD,EAAjD;AACAA,4BAAmC,EAAnC;AAwBjB;AA1BA;;AAAaQ","names":["StatsManager","repoInfo","hashString","toString","collections_","StatsCollection_1","creatorFunction","reporters_","exports"],"sources":["../src/core/stats/StatsManager.ts"],"sourcesContent":["/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { StatsCollection } from './StatsCollection';\nimport { RepoInfo } from '../RepoInfo';\n\nexport class StatsManager {\n  private static collections_: { [k: string]: StatsCollection } = {};\n  private static reporters_: { [k: string]: any } = {};\n\n  static getCollection(repoInfo: RepoInfo): StatsCollection {\n    const hashString = repoInfo.toString();\n\n    if (!this.collections_[hashString]) {\n      this.collections_[hashString] = new StatsCollection();\n    }\n\n    return this.collections_[hashString];\n  }\n\n  static getOrCreateReporter<T>(\n    repoInfo: RepoInfo,\n    creatorFunction: () => T\n  ): T {\n    const hashString = repoInfo.toString();\n\n    if (!this.reporters_[hashString]) {\n      this.reporters_[hashString] = creatorFunction();\n    }\n\n    return this.reporters_[hashString];\n  }\n}\n"]},"metadata":{},"sourceType":"script"}