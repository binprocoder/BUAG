{"ast":null,"code":"\"use strict\";\n/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar util_1 = require(\"@firebase/util\");\n/**\n * Implements a set with a count of elements.\n *\n * @template K, V\n */\n\n\nvar CountedSet =\n/** @class */\nfunction () {\n  function CountedSet() {\n    this.set = {};\n  }\n  /**\n   * @param {!K} item\n   * @param {V} val\n   */\n\n\n  CountedSet.prototype.add = function (item, val) {\n    this.set[item] = val !== null ? val : true;\n  };\n  /**\n   * @param {!K} key\n   * @return {boolean}\n   */\n\n\n  CountedSet.prototype.contains = function (key) {\n    return util_1.contains(this.set, key);\n  };\n  /**\n   * @param {!K} item\n   * @return {V}\n   */\n\n\n  CountedSet.prototype.get = function (item) {\n    return this.contains(item) ? this.set[item] : undefined;\n  };\n  /**\n   * @param {!K} item\n   */\n\n\n  CountedSet.prototype.remove = function (item) {\n    delete this.set[item];\n  };\n  /**\n   * Deletes everything in the set\n   */\n\n\n  CountedSet.prototype.clear = function () {\n    this.set = {};\n  };\n  /**\n   * True if there's nothing in the set\n   * @return {boolean}\n   */\n\n\n  CountedSet.prototype.isEmpty = function () {\n    return util_1.isEmpty(this.set);\n  };\n  /**\n   * @return {number} The number of items in the set\n   */\n\n\n  CountedSet.prototype.count = function () {\n    return util_1.getCount(this.set);\n  };\n  /**\n   * Run a function on each k,v pair in the set\n   * @param {function(K, V)} fn\n   */\n\n\n  CountedSet.prototype.each = function (fn) {\n    util_1.forEach(this.set, function (k, v) {\n      return fn(k, v);\n    });\n  };\n  /**\n   * Mostly for debugging\n   * @return {Array.<K>} The keys present in this CountedSet\n   */\n\n\n  CountedSet.prototype.keys = function () {\n    var keys = [];\n    util_1.forEach(this.set, function (k) {\n      keys.push(k);\n    });\n    return keys;\n  };\n\n  return CountedSet;\n}();\n\nexports.CountedSet = CountedSet;","map":{"version":3,"mappings":";AAAA;;;;;;;;;;;;;;;;;;;;AAgBA;AAEA;;;;;;;AAKA;AAAA;AAAA;AAAA;AACE,eAA0B,EAA1B;AA0ED;AAxEC;;;;;;AAIAA,uCAAIC,IAAJ,EAAaC,GAAb,EAAmB;AACjB,SAAKC,GAAL,CAASF,IAAT,IAAwBC,GAAG,KAAK,IAAR,GAAeA,GAAf,GAAsB,IAA9C;AACD,GAFD;AAIA;;;;;;AAIAF,4CAASI,GAAT,EAAe;AACb,WAAOC,gBAAS,KAAKF,GAAd,EAAmBC,GAAnB,CAAP;AACD,GAFD;AAIA;;;;;;AAIAJ,uCAAIC,IAAJ,EAAW;AACT,WAAO,KAAKK,QAAL,CAAcL,IAAd,IAAsB,KAAKE,GAAL,CAASF,IAAT,CAAtB,GAA8CM,SAArD;AACD,GAFD;AAIA;;;;;AAGAP,0CAAOC,IAAP,EAAc;AACZ,WAAO,KAAKE,GAAL,CAASF,IAAT,CAAP;AACD,GAFD;AAIA;;;;;AAGAD;AACE,SAAKG,GAAL,GAAW,EAAX;AACD,GAFD;AAIA;;;;;;AAIAH;AACE,WAAOK,eAAQ,KAAKF,GAAb,CAAP;AACD,GAFD;AAIA;;;;;AAGAH;AACE,WAAOK,gBAAS,KAAKF,GAAd,CAAP;AACD,GAFD;AAIA;;;;;;AAIAH,wCAAKQ,EAAL,EAA6B;AAC3BH,mBAAQ,KAAKF,GAAb,EAAkB,UAACM,CAAD,EAAOC,CAAP,EAAW;AAAK,eAAE,CAACD,CAAD,EAAIC,CAAJ,CAAF;AAAQ,KAA1C;AACD,GAFD;AAIA;;;;;;AAIAV;AACE,QAAMW,IAAI,GAAQ,EAAlB;AACAN,mBAAQ,KAAKF,GAAb,EAAkB,UAACM,CAAD,EAAK;AACrBE,UAAI,CAACC,IAAL,CAAUH,CAAV;AACD,KAFD;AAGA,WAAOE,IAAP;AACD,GAND;;AAOF;AA3EA;;AAAaE","names":["CountedSet","item","val","set","key","util_1","contains","undefined","fn","k","v","keys","push","exports"],"sources":["../src/core/util/CountedSet.ts"],"sourcesContent":["/**\n * Copyright 2017 Google Inc.\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *   http://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { isEmpty, getCount, forEach, contains } from '@firebase/util';\n\n/**\n * Implements a set with a count of elements.\n *\n * @template K, V\n */\nexport class CountedSet<K, V> {\n  set: { [k: string]: V } = {};\n\n  /**\n   * @param {!K} item\n   * @param {V} val\n   */\n  add(item: K, val: V) {\n    this.set[item as any] = val !== null ? val : (true as any);\n  }\n\n  /**\n   * @param {!K} key\n   * @return {boolean}\n   */\n  contains(key: K) {\n    return contains(this.set, key);\n  }\n\n  /**\n   * @param {!K} item\n   * @return {V}\n   */\n  get(item: K): V | void {\n    return this.contains(item) ? this.set[item as any] : undefined;\n  }\n\n  /**\n   * @param {!K} item\n   */\n  remove(item: K) {\n    delete this.set[item as any];\n  }\n\n  /**\n   * Deletes everything in the set\n   */\n  clear() {\n    this.set = {};\n  }\n\n  /**\n   * True if there's nothing in the set\n   * @return {boolean}\n   */\n  isEmpty(): boolean {\n    return isEmpty(this.set);\n  }\n\n  /**\n   * @return {number} The number of items in the set\n   */\n  count(): number {\n    return getCount(this.set);\n  }\n\n  /**\n   * Run a function on each k,v pair in the set\n   * @param {function(K, V)} fn\n   */\n  each(fn: (k: K, v: V) => void) {\n    forEach(this.set, (k: K, v: V) => fn(k, v));\n  }\n\n  /**\n   * Mostly for debugging\n   * @return {Array.<K>} The keys present in this CountedSet\n   */\n  keys(): K[] {\n    const keys: K[] = [];\n    forEach(this.set, (k: K) => {\n      keys.push(k);\n    });\n    return keys;\n  }\n}\n"]},"metadata":{},"sourceType":"script"}